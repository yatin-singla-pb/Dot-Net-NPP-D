<header class="container fixed-top">
  <div class="d-flex">
    <img src="assets/images/npp_logo_denim.jpg" alt="NPP Logo" />
  </div>
</header>

<main class="container">
  <div class="row justify-content-center">

    <!-- Reset Form -->
    <form (ngSubmit)="onSubmit()" class="col-4" *ngIf="!success">
      <div class="mb-3">
        <h3 class="fc-denim">Reset Password</h3>
        Enter your new password below.
      </div>

      <!-- Error Message -->
      <div *ngIf="error" class="alert alert-danger mb-3" role="alert">
        <i class="fa-solid fa-exclamation-triangle me-2"></i>
        {{error}}
      </div>

      <!-- New Password -->
      <div class="mb-3 form-floating">
        <input
          type="password"
          class="form-control"
          id="password"
          [(ngModel)]="password"
          name="password"
          placeholder="New Password"
          minlength="6"
          required>
        <label for="password">New Password</label>
      </div>

      <!-- Confirm Password -->
      <div class="mb-3 form-floating">
        <input
          type="password"
          class="form-control"
          id="confirmPassword"
          [(ngModel)]="confirmPassword"
          name="confirmPassword"
          placeholder="Confirm Password"
          required>
        <label for="confirmPassword">Confirm Password</label>
      </div>

      <div *ngIf="confirmPassword && !passwordsMatch" class="text-danger mb-3">
        <small>Passwords do not match.</small>
      </div>

      <div *ngIf="password && password.length < 6" class="text-danger mb-3">
        <small>Password must be at least 6 characters.</small>
      </div>

      <!-- Buttons -->
      <div class="d-flex justify-content-between">
        <button
          type="button"
          class="btn btn-denim"
          routerLink="/login">
          Back to Login
        </button>
        <button
          type="submit"
          class="btn btn-denim"
          [disabled]="loading || !formValid">
          <span *ngIf="loading" class="spinner-border spinner-border-sm me-2" role="status"></span>
          {{loading ? 'Resetting...' : 'Reset Password'}}
        </button>
      </div>
    </form>

    <!-- Success Message -->
    <div class="col-4" *ngIf="success">
      <div class="mb-3">
        <h3 class="fc-denim">Password Reset Successful</h3>
      </div>

      <div class="alert alert-success mb-3" role="alert">
        <i class="fa-solid fa-check-circle me-2"></i>
        Your password has been reset successfully. You can now log in with your new password.
      </div>

      <div class="text-center">
        <button
          type="button"
          class="btn btn-denim"
          routerLink="/login">
          Back to Login
        </button>
      </div>
    </div>

  </div>
</main>
